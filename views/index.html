<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="/style/indexStyle.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="/kendo/css/kendo.common-material.min.css">
    <link rel="stylesheet" href="/kendo/css/kendo.material.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.4.1.min.js"></script>
    <script src="/kendo/js/kendo.all.min.js"></script>
    <title>HMFMSystem</title>

</head>
<body>
    <img src = "/picture/homeTitlePicture.jpg" id="homeTitlePicture">
    <ul style="margin-bottom: 1px;">
        <li><a class="active" href="#home">HMFMSystem</a></li>
        <li><a href="#index">設備查詢</a></li>
        <li><a href="/locationSelecter">地點查詢</a></li>
        <li><a href="/newEquitment">新增設備</a></li>
        <li><a href="/newLocation">新增地點</a></li>
    </ul>
<div id="mainSelect_fbtn" class="main_fbtn" style="border-bottom: 2px solid rgb(65, 65, 65); background-color: rgb(49, 47, 47);">
        <h4 class="main_func_text">搜尋</h4>
</div>
   
<div id="select_area">
<div ></div>
        <div class="main_fbtn" id="selectByEq_fbtn">
                <h5 class="main_func_text">使用設備資料搜尋</h5>
        </div>
        <div class ="hide_selecter" id="selectByEquit">
            <form action="" method="post">
                <div class="form-group row">
                        <label class="col-md-3 control-label" style="margin-bottom: 20px;">設備ID</label>
                        <div class="col-md-9">
                                <input type="text" name="OID" class="form-control" id="oid_inputer">        
                        </div>
                </div>

                <div class="form-group row">
                        <label class="col-md-3 control-label" style="margin-bottom: 20px;">型號</label>
                        <div class="col-md-9">
                        <select id="ot_selecter" class=" form-control"></select>
                        </div>
                </div>
                <div class="form-group row">
                        <label class="col-md-3 control-label" style="margin-bottom: 20px;">規格</label>
                        <div class="col-md-9">
                        <select id="ts_selecter" class=" form-control"></select>
                        </div>
                </div>
                <div class="form-group row">
                        <label class="col-md-3 control-label" style="margin-bottom: 20px;">磅數</label>
                        <div class="col-md-9">
                        <select id="pound_selecter" class=" form-control"></select>
                        </div>
                </div>
                <div class="form-group row">
                        <label class="col-md-3 control-label" style="margin-bottom: 20px;">狀態</label>
                        <div class="col-md-9">
                        <select id="cs_selecter" class=" form-control"></select>
                        </div>
                </div>

                <div class="form-group row">
                        <label class="col-md-3 control-label" style="margin-bottom: 20px;">使用期限</label>
                        <div class="col-md-9">
                                <input id="expDatePicker" value="10/10/2011" title="datepicker" style="width: 100%" />
                        </div>
                </div>
                <div class="quick-btn-area">
                        <button id="locErrEQ_searcher" class="btn btn-default">異位設備查詢</button>
                        <button id="lossEQ_searcher" class="btn btn-default">遺失設備查詢</button>
                        <button id="discardEQ_searcher" class="btn btn-default">廢棄設備查詢</button>
                </div>

                <div class="form-btn">
                        <button class="btn btn-default">取消</button>
                <button class="btn btn-danger">清除</button>
                <button type="submit" value="submit" class="btn btn-primary" id="selectByEq_btn">查詢</button>
                </div>
                
            </form>
            <div style="height: 40px;width:100%;float: none;"></div>
            
        </div>
  
        <div class="main_fbtn" id="selectByLoc_fbtn">
                <h5 class="main_func_text">使用放置地點搜尋</h5>
        </div>
        <div class ="hide_selecter" id="selectByLoc">
                <form action="" method="post">
                        <div class="form-group row">
                                <label class="col-md-3 control-label" style="margin-bottom: 20px;">地點ID</label>
                                <div class="col-md-9">
                                        <input type="text" name="LocID" class="form-control" id="locid_inputer">        
                                </div>
                        </div>
                        <div class="form-group row">
                                <label class="col-md-3 control-label" style="margin-bottom: 20px;">館別</label>
                                <div class="col-md-9">
                                <select id="bid_selecter" class=" form-control"></select>
                                </div>
                        </div>
                        <div class="form-group row">
                                <label class="col-md-3 control-label" style="margin-bottom: 20px;">樓層</label>
                                <div class="col-md-9">
                                <select id="bf_selecter" class=" form-control"></select>
                                </div>
                        </div>
                        <div class="form-group row">
                                <label class="col-md-3 control-label" style="margin-bottom: 20px;">地點</label>
                                <div class="col-md-9">
                                <select id="loc_selecter" class=" form-control"></select>
                                </div>
                        </div>
                        <div class="quick-btn-area">
                                <button id="locErrEQ_searcher" class="btn btn-default">廢棄地點查詢</button>
                                
                        </div>
                        <div class="form-btn">
                                <button class="btn btn-default">取消</button>
                                <button class="btn btn-danger">清除</button>
                                <button type="submit" value="submit" class="btn btn-primary" id="selectByLoc_btn">查詢</button>
                        </div>
                        
                </form>
        </div>
        <div style="background-color: rgb(49, 47, 47);height: 5px;"></div>
</div>       
<div id="data_grid" class="col-12">

        </div>     
</body>
<script>
$(document).ready(function(){
        $("#select_area").hide();
        $(".hide_selecter").hide();

        $("#selectByEq_fbtn").click(function(){
                $("#selectByEquit").toggle(200);
        });
        $("#selectByLoc_fbtn").click(function(){
                $("#selectByLoc").toggle(200);
        });
        $("#mainSelect_fbtn").click(function(){
                $("#select_area").toggle(200);
        });
        $("#expDatePicker").kendoDatePicker({ value: new Date(), format: "yyyy/MM/dd" });
        $("#oid_inputer").kendoMaskedTextBox(); 
        $("#locid_inputer").kendoMaskedTextBox(); 
        
});
$("#selectByEq_btn").click(function () {
        if (gridCount != 0) {
            $("#book_grid").data('kendoGrid').destroy();
        }
       
        gridCount++;
        var data = {
            "oid": $('#oid_inputer').val(),
            "objectType": $('#ot_selecter').val(),
            "typeSpec": $('#ts_selecter').val(),
            "pound": $('#pound_selecter').val(),
            "cs": $('#cs_selecter').val(),
            "expDate": $('#expDatePicker').val()
        };
        $("#book_grid").kendoGrid({
            dataSource: {
                transport: {
                    read: {
                        method: "post",
                        url: "/index/searchByEq",
                        dataType: "json",
                        data: data
                    }
                },
                schema: {
                    model: {
                        fields: {
                            oid: { type: "int" },
                            objectType: { type: "int" },
                            typeSpec: { type: "string" },
                            pound: { type: "string" },
                            cs: { type: "string" },
                            expDate: { type: "datetime" }
                            //here
                        }
                    }
                },
                pageSize: 20,
            },
            height: 550,
            sortable: true,
            pageable: {
                input: true,
                numeric: false
            },
            columns: [
                { field: "BookClass", title: "書籍種類", width: "15%" },
                { field: "BookName", title: "書籍名稱", width: "25%" },
                { field: "BoughtDate", title: "購買日期", width: "10%" },
                { field: "BookStatus", title: "書籍狀態", width: "10%" },
                { field: "BookKeeper", title: "借閱人", width: "9%" },
                { command: { text: "借閱紀錄", click: lendRecord }, title: " ", width: "80px" },
                { command: { text: "編輯", click: editBook }, title: " ", width: "80px" },
                { command: { text: "刪除", click: deleteBook }, title: " ", width: "80px" }
            ]

        });
    })
</script>
</html>
